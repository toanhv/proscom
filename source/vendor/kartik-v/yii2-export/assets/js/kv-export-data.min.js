/*!
 * @package   yii2-export
 * @author    Kartik Visweswaran <kartikv2@gmail.com>
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2015 - 2016
 * @version   1.2.6
 *
 * Export Data Validation Module.
 *
 * Author: Kartik Visweswaran
 * Copyright: 2015, Kartik Visweswaran, Krajee.com
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */!function(t){"use strict";var e=function(e,o){return null===e||void 0===e||e===[]||""===e||o&&""===t.trim(e)},o=function(t,e,o,n){var a=screen.width/2-o/2,i=60,r=window.open("",e,"",!0);return r.close(),window.open(t,e,"toolbar=no, location=no, directories=no, status=yes, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+o+", height="+n+", top="+i+", left="+a)},n='<html style="display:table;width:100%;height:100%;"><title>Export Data - &copy; Krajee</title><body style="display:table-cell;font-family:Helvetica,Arial,sans-serif;color:#888;font-weight:bold;line-height:1.4em;text-align:center;vertical-align:middle;width:100%;height:100%;padding:0 10px;">{msg}</body></html>',a=function(e,o){var n=this;n.$element=t(e),t.each(o,function(t,e){n[t]=e});var a=o.settings;n.$form=t("#"+a.formId),n.messages=a.messages,n.popup="",n.listen()};a.prototype={constructor:a,setPopupAlert:function(t){var e=this;if(e.popup.document)if(arguments.length&&arguments[1]){var o=e.popup.document.getElementsByTagName("body");setTimeout(function(){o[0].innerHTML=t},4e3)}else{var a=n.replace("{msg}",t);e.popup.document.write(a)}},listen:function(){var t=this;t.$form.attr("action",window.location.href).appendTo("body"),t.listenClick(),"_popup"===t.target&&t.$form.off("submit.exportmenu").on("submit.exportmenu",function(){setTimeout(function(){t.setPopupAlert(t.messages.downloadComplete,!0)},1e3)})},listenClick:function(){var n=this;n.$element.off("click.exportmenu").on("click.exportmenu",function(a){var i,r,l,s,p,u="",c=window[n.dialogLib];a.preventDefault(),a.stopPropagation(),n.showConfirmAlert&&(r=n.messages,l=e(n.alertMsg)?"":n.alertMsg,s=e(r.allowPopups)?"":r.allowPopups,p=e(r.confirmDownload)?"":r.confirmDownload,u=l.length&&s.length?l+"\n\n"+s:!l.length&&s.length?s:l.length&&!s.length?l:"",p.length&&(u=u+"\n\n"+p),e(u)||(i=t(this).data("format"),c.confirm(u,function(a){var r,l=[];a&&(n.$form.find('[name="export_type"]').val(i),"_popup"===n.target&&(n.popup=o("","kvExportFullDialog",350,120),n.popup.focus(),n.setPopupAlert(n.messages.downloadProgress)),e(n.columnSelectorId)||(r=t("#"+n.columnSelectorId).parent().find('input[name="export_columns_selector[]"]'),r.each(function(){var e=t(this);e.is(":checked")&&l.push(e.attr("data-key"))}),n.$form.find('input[name="export_columns"]').val(JSON.stringify(l))),n.$form.trigger("submit"))})))})}},t.fn.exportdata=function(e){var o=Array.apply(null,arguments);return o.shift(),this.each(function(){var n=t(this),i=n.data("exportdata"),r="object"==typeof e&&e;i||n.data("exportdata",i=new a(this,t.extend({},t.fn.exportdata.defaults,r,t(this).data()))),"string"==typeof e&&i[e].apply(i,o)})},t.fn.exportdata.defaults={filename:"export",target:"_popup",showConfirmAlert:!0,columnSelectorId:null,alertMsg:"",dialogLib:"krajeeDialog",settings:{formId:"",messages:{allowPopups:"",confirmDownload:"",downloadProgress:"",downloadComplete:""}}}}(window.jQuery);